#!/usr/bin/env bash
# vim:set ts=8 sw=2 sts=2 et:

set -o errexit
set -o nounset
set -o pipefail

print () {
  echo "pip: $@" 1>&2
}

PIP2_PATH="$(which pip2)" || true
PIP3_PATH="$(which pip3)" || true

if [[ -z "${PIP2_PATH}" ]]; then
  print "pip2 is not in your path"
else
  print "pip2 is ${PIP2_PATH} --> $(readlink ${PIP2_PATH})"
fi

if [[ -z "${PIP3_PATH}" ]]; then
  print "pip3 is not in your path"
else
  print "pip3 is ${PIP3_PATH} --> $(readlink ${PIP3_PATH})"
fi

print
print 'You are outside of a virtualenv. Use pip2 or pip3 explicitly:'
print
print '$ PIP_REQUIRE_VIRTUALENV=false pip2 list'
print '$ PIP_REQUIRE_VIRTUALENV=false pip3 list'
print
print 'To install Python and virtualenv:'
print
print '$ brew install python python3'
print '$ PIP_REQUIRE_VIRTUALENV=false pip2 install virtualenv virtualenvwrapper'
print
print 'To create a new virtualenv:'
print
print '$ mkvirtualenv p2-name             # For Python 2'
print '$ mkvirtualenv -p python3 p3-name  # For Python 3'
print
print 'To use a virtualenv:'
print
print '$ workon virtualenv-name'

# In case this gets called from a script somewhere, make sure that script fails.
exit 1
